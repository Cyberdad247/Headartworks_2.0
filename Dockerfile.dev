# Development Dockerfile for local testing
FROM node:18-alpine

# Set working directory
WORKDIR /app

# Install dependencies first (for better caching)
COPY package*.json ./
RUN npm install

# Copy source code
COPY . .

# Create a basic .env file for development
RUN echo "NODE_ENV=development" > .env && \
    echo "SESSION_SECRET=dev-session-secret-123" >> .env && \
    echo "PUBLIC_STOREFRONT_API_TOKEN=demo-token" >> .env && \
    echo "PRIVATE_STOREFRONT_API_TOKEN=demo-private-token" >> .env && \
    echo "PUBLIC_STORE_DOMAIN=demo-store.myshopify.com" >> .env && \
    echo "PUBLIC_STOREFRONT_ID=demo-storefront-id" >> .env

# Expose port 3000
EXPOSE 3000

# Run in development mode
CMD ["npm", "run", "dev"]
